import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';
import Swal from 'sweetalert2';

@Component({
  selector: 'app-js-obfuscation',
  templateUrl: './js-obfuscation.component.html',
  styleUrls: ['./js-obfuscation.component.css'],
})
export class JsObfuscationComponent implements OnInit {
  commentForm: FormGroup;
  comments: any[] = [];

  constructor(private fb: FormBuilder) {
    this.commentForm = this.fb.group({
      text: ['', Validators.required],
    });
  }

  ngOnInit(): void {
    console.clear();
    console.info(
      "It seems that the protection doesn't allow to write alphanumeric characters..."
    );
  }

  comment() {
    let text = this.commentForm.value.text;

    this.comments.push(text);

    if (text.includes('[]')) {
      Swal.fire({
        icon: 'success',
        title: 'Congrats, challenge complete!',
        text: 'You have found the vulnerability',
      });
    }
  }
}
