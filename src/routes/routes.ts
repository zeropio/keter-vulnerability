import { Request, Response, Router } from "express";
import { db } from "../database/database";
import { iLogin, Log } from "../model/login";

class DatoRoutes {
  private _router: Router;

  constructor() {
    this._router = Router();
  }
  get router() {
    return this._router;
  }

  private index = async (req: Request, res: Response) => {
    res.send("Test API");
  };

  private getUsers = async (req: Request, res: Response) => {
    await db
      .connectionBD()
      .then(async (message) => {
        const query = await Log.find();
        console.log(Log);
        res.json(query);
      })
      .catch((message) => {
        res.send(message);
      });
    db.disconnectionBD();
  };

  myRoutes() {
    this._router.get("/", this.index);
    this._router.get("/login", this.getUsers);
  }
}

const obj = new DatoRoutes();
obj.myRoutes();
export const routes = obj.router;
